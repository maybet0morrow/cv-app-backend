(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){},11:function(e,t,n){},31:function(e,t,n){e.exports=n.p+"static/media/reactLogo.5d5d9eef.svg"},32:function(e,t,n){e.exports=n.p+"static/media/nodeLogo.38c3a911.png"},38:function(e,t,n){e.exports=n(66)},66:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),o=n.n(c),i=n(3),s=n(36),l=n(1),u=n.n(l),m=n(2),p=n(7),f=n.n(p),d=null,v={getAll:function(){var e=Object(m.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:d}},e.next=3,f.a.get("/api/comments",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),createNew:function(){var e=Object(m.a)(u.a.mark(function e(t){var n,a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:d}},a={content:t},e.next=4,f.a.post("/api/comments",a,n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){d="bearer ".concat(e)}},E=null,N={getAll:function(){var e=Object(m.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:E}},e.next=3,f.a.get("/api/content",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),createNew:function(){var e=Object(m.a)(u.a.mark(function e(t){var n,a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},a={content:t,date:new Date},e.next=4,f.a.post("/api/content",a,n);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){E="bearer ".concat(e)}},g=n(12),h=function(){return function(){var e=Object(m.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getAll();case 2:n=e.sent,t({type:"INIT_COMMENTS",data:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_COMMENT":return[].concat(Object(g.a)(e),[t.data]);case"INIT_COMMENTS":return t.data;default:return e}},b=function(){return function(){var e=Object(m.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getAll();case 2:n=e.sent,t({type:"INIT",data:n[0]});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE":return[].concat(Object(g.a)(e),[t.data]);case"INIT":return t.data;default:return e}},y={login:function(){var e=Object(m.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/login",t);case 2:return n=e.sent,console.log("logging in"),e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},w=function(e,t,n){return function(){var a=Object(m.a)(u.a.mark(function a(r){var c;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,y.login({username:e,password:t});case 3:return c=a.sent,window.localStorage.setItem("cvAppUser",JSON.stringify(c)),v.setToken(c.token),N.setToken(c.token),console.log("user set to",c),r({type:"LOGIN",data:c}),c.activated||n("Tervetuloa!",!1,5),a.abrupt("return",c);case 13:a.prev=13,a.t0=a.catch(0),n("Kirjautuminen Ep\xe4onnistui.",!0,5);case 16:return a.abrupt("return",null);case 17:case"end":return a.stop()}},a,null,[[0,13]])}));return function(e){return a.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(m.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("user set to null"),window.localStorage.removeItem("cvAppUser"),n({type:"LOGOUT",data:null}),e("Uloskirjautuminen Onnistui.",!1,5);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;case"INIT_USER":return t.data;default:return e}},O={message:null,error:!1},I=function(e,t,n){return console.log("setting notification:",e),function(a){var r=setTimeout(function(){a({type:"CANCEL_NOTIFICATION"})},1e3*n);a({type:"SET_NOTIFICATION",data:{message:e,error:t,seconds:n,cancel:r}})}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.data;case"CANCEL_NOTIFICATION":return O;default:return e}},L=(n(9),n(10),n(11),n(31)),A=n.n(L),S=n(32),B=n.n(S),M=function(){return r.a.createElement("div",{className:"footerContainer"},r.a.createElement("p",{className:"footerText"},"Made by Niklas Impi\xf6"),r.a.createElement("a",{href:"https://github.com/maybet0morrow",className:"footerText"},"@GitHub"),r.a.createElement("br",null),r.a.createElement("img",{src:B.a,className:"logo",alt:"nodeLogo"}),r.a.createElement("img",{src:A.a,className:"logo",alt:"reactLogo"}))},z=Object(i.b)(null,{notify:I,logout:T})(function(e){return r.a.createElement("div",{className:"headerMenuContainer"},r.a.createElement("div",{className:"gridHeaderMenu"},r.a.createElement("div",{className:"headerMenuLogo"},r.a.createElement("p",{className:"logoText"},"Niklas Impi\xf6 Cv App")),r.a.createElement("button",{className:"logoutButton rippleButton",onClick:function(){console.log("Logging out"),e.logout(e.notify)}},"Kirjaudu Ulos")))}),D=Object(i.b)(function(e){return{content:e.content}})(function(e){return r.a.createElement("div",{className:"contentContainer"},void 0!==e.content&&0!==e.content.length?r.a.createElement("div",{className:"contentGrid"},r.a.createElement("div",{className:"contentHeaderBox"},r.a.createElement("p",{className:"headerTextLarge"},e.content.name),r.a.createElement("div",{className:"addressLine"},r.a.createElement("span",{className:"textPrimary"},e.content.address," "),r.a.createElement("span",{className:"textPrimary"},e.content.zipAndCity),r.a.createElement("p",{className:"textPrimary"},e.content.email),r.a.createElement("p",{className:"textPrimary"},e.content.phone))),r.a.createElement("div",{className:"contentBox contentProfileBox"},r.a.createElement("p",{className:"headerText"},"Profiili"),r.a.createElement("ul",{className:"contentList"},e.content.profile.map(function(e,t){return r.a.createElement("li",{key:t,className:"contentList"},r.a.createElement("p",{className:"textContent"}," ",e))}))),r.a.createElement("div",{className:"contentBox contentEducationBox"},r.a.createElement("p",{className:"headerText"},"Koulutus"),r.a.createElement("p",{className:"textPrimary"}),r.a.createElement("ul",{className:"contentList"},e.content.education.map(function(e,t){return r.a.createElement("li",{key:t,className:"contentList"},r.a.createElement("p",{className:"textContent"},e.name),r.a.createElement("p",{className:"textContent"},e.degree," ",e.graduation),void 0!==e.link&&""!==e.link?r.a.createElement("p",{className:"textContent"}," Kandidaatinty\xf6: ",r.a.createElement("a",{className:"textContent",href:e.link},"Linkki")):r.a.createElement("div",null))}))),r.a.createElement("div",{className:"contentBox contentExperienceBox"},r.a.createElement("p",{className:"headerText"},"Ty\xf6kokemus"),r.a.createElement("ul",{className:"contentList"},e.content.jobHistory.map(function(e,t){return r.a.createElement("li",{key:t,className:"contentList"},r.a.createElement("p",{className:"textContent"}," ",e.jobTitle),r.a.createElement("p",{className:"textContent"},e.employer),r.a.createElement("p",{className:"textContent"},e.duration))}))),r.a.createElement("div",{className:"contentBox contentSkillsBox"},r.a.createElement("p",{className:"headerText"},"Taidot"),r.a.createElement("ul",{className:"contentList"},e.content.skills.map(function(e,t){return r.a.createElement("li",{key:t,className:"contentList"},r.a.createElement("p",{className:"textContent"}," ",e))})))):r.a.createElement("div",{className:"noContent"}))}),U=Object(i.b)(function(e){return{notification:e.notification}},{cancelNotification:function(){return function(e){e({type:"CANCEL_NOTIFICATION"})}}})(function(e){console.log(e),console.log("setting notification timer animation duration for ".concat(e.notification.seconds," seconds;"));for(var t=null,n=0;n<document.styleSheets[0].cssRules.length;n++)if(".timeRemaining"===document.styleSheets[0].cssRules[n].selectorText){t=n;break}t&&(document.styleSheets[0].cssRules[t].style.animationDuration="".concat(e.notification.seconds,"s"));return r.a.createElement("div",{name:"notificationContainerInner",className:"notificationContainerInner"},r.a.createElement("div",{className:"notificationGrid"},e.notification.error?r.a.createElement("p",{className:"notificationHeader headerText"},"Virhe"):r.a.createElement("p",{className:"notificationHeader headerText"},"Ilmoitus"),r.a.createElement("p",{className:"notificationDescription"},e.notification.message),r.a.createElement("button",{onClick:function(t){t.preventDefault(),clearTimeout(e.notification.cancel),e.cancelNotification()},className:"notificationButton rippleButton"},"Sulje")),r.a.createElement("div",{className:"notificationTimer"},r.a.createElement("div",{className:"timeRemaining"})))}),_=n(37),R={createComment:function(e,t){return function(){var n=Object(m.a)(u.a.mark(function n(a){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.createNew(e,t);case 2:r=n.sent,a({type:"CREATE_COMMENT",data:r});case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},notify:I},F=Object(i.b)(function(e){return{comments:e.comments}},R)(function(e){var t=Object(a.useState)(""),n=Object(_.a)(t,2),c=n[0],o=n[1],i=e.comments,s=document.getElementsByClassName("input"),l=function(){var t=Object(m.a)(u.a.mark(function t(n){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),console.log("submit"),a=n.target.content.value,n.target.content.value="",!(a.length<3)){t.next=8;break}return e.notify("Kommentin minimipituus on kolme merkki\xe4.",!0,5),o(""),t.abrupt("return");case 8:e.createComment(a),o("");case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"commentSectionContainer"},r.a.createElement("p",{className:"headerTextLeft"},e.comments.length," Kommenttia"),r.a.createElement("div",{className:"divider"}),r.a.createElement("form",{onSubmit:l},r.a.createElement("div",{className:"commentContainer inputContainer"},r.a.createElement("textarea",{onChange:function(e){e.preventDefault(),o(e.target.value),e.target.setAttribute("rows",parseInt(s.content.scrollHeight/18))},rows:"1",maxLength:"256",className:"input",type:"text",name:"content",placeholder:"Uusi Kommentti."}),r.a.createElement("div",{className:"inputFocusLineComment inputFocusLine"}),0===c.length?r.a.createElement("div",null):r.a.createElement("div",{className:"commentButtonsContainer"},r.a.createElement("button",{name:"submit",className:"positiveButton rippleButton"},"Tallenna"),r.a.createElement("button",{name:"cancel",onClick:function(e){e.preventDefault(),o(""),s.content.value=""},className:"negativeButton rippleButton"},"Peruuta")))),r.a.createElement("ul",{className:"commentSectionList"},0===i.length?r.a.createElement("p",{className:"commentText"}," Ei yht\xe4\xe4n kommenttia viel\xe4. \xaf\\_(\u30c4)_/\xaf"):function(){var e=Object(g.a)(i);return e.sort(function(e,t){return new Date(t.date)-new Date(e.date)}),e}().map(function(e){return r.a.createElement("li",{key:e.id,className:"commentListItem"},r.a.createElement("span",{className:"commentAuthor"},e.user.name?e.user.name:"You"," @ "),r.a.createElement("span",{className:"commentDate"},function(e){for(var t=new Date-new Date(e),n=[["vuotta",31536e6],["kuukautta",2592e6],["p\xe4iv\xe4\xe4",864e5],["tuntia",36e5],["minuuttia",6e4],["sekunttia",1e3]],a=["vuosi","kuukausi","p\xe4iv\xe4","tunti","minuutti","sekuntti"],r=0;r<n.length;r++){if(1===Math.floor(t/n[r][1]))return"1 ".concat(a[r]," sitten.");if(t/n[r][1]>1)return"".concat(Math.floor(t/n[r][1])," ").concat(n[r][0]," sitten.")}return"Just Now."}(e.date)),r.a.createElement("p",{className:"commentText"},e.content))})))}),K=Object(i.b)(null,{login:w,notify:I,initializeComments:h,initializeContent:b})(function(e){var t=function(){var t=Object(m.a)(u.a.mark(function t(n){var a,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("attempting login"),n.preventDefault(),a=n.target.username.value,r=n.target.password.value,n.target.username.value="",n.target.password.value="",t.next=8,e.login(a,r,e.notify);case 8:t.sent&&(e.initializeComments(),e.initializeContent());case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"loginContainer centerAlign"},r.a.createElement("p",{className:"headerTextLarge bottomPadding30"},"Kirjaudu"),r.a.createElement("form",{name:"loginForm",onSubmit:t},r.a.createElement("div",{className:"inputContainer"},r.a.createElement("input",{name:"username",className:"input",placeholder:"K\xe4ytt\xe4j\xe4tunnus",maxLength:"32",autoComplete:"off"}),r.a.createElement("div",{className:"inputFocusLine"})),r.a.createElement("div",{className:"inputContainer"},r.a.createElement("input",{name:"password",className:"input",type:"password",placeholder:"Salasana",maxLength:"64"}),r.a.createElement("div",{className:"inputFocusLine"})),r.a.createElement("button",{className:"loginButton rippleButton"},"Kirjaudu")))}),P={notify:I,initializeContent:b,login:w,logout:T,initLoggedUser:function(e){return function(t){t({type:"INIT_USER",data:e})}},initializeComments:h},G=Object(i.b)(function(e){return{users:e.users,notification:e.notification,loggedUser:e.user,content:e.content,comments:e.comments}},P)(function(e){return Object(a.useEffect)(function(){var t=window.localStorage.getItem("cvAppUser");if(t){var n=JSON.parse(t);e.initLoggedUser(n),v.setToken(n.token),N.setToken(n.token),console.log("initalizing content"),e.initializeContent(),e.initializeComments()}},[]),r.a.createElement("div",{className:"appContainer"},r.a.createElement(s.a,null,null===e.loggedUser?r.a.createElement(K,{onSuccess:function(){}}):r.a.createElement("div",{className:"appContainer"},r.a.createElement("div",{className:"gridContainer"},r.a.createElement(z,null),r.a.createElement(D,null),r.a.createElement(F,null)),r.a.createElement(M,null)),null!==e.notification.message?r.a.createElement(U,null):r.a.createElement("div",null)))}),H=n(8),J=n(34),V=n(35),W=Object(H.combineReducers)({content:C,user:k,notification:j,comments:x}),Y=Object(H.createStore)(W,Object(V.composeWithDevTools)(Object(H.applyMiddleware)(J.a)));o.a.render(r.a.createElement(i.a,{store:Y},r.a.createElement(G,null)),document.getElementById("root"))},9:function(e,t,n){}},[[38,1,2]]]);
//# sourceMappingURL=main.ccb97bc0.chunk.js.map